{% extends 'base.html' %}
{% load static %}

{% block content %}
{% if user.is_superuser == 1 %} <!-- valido que el usuario que ingresa a esta ruta sea un administrador tipo= 1-->

<!-- div inicial-->
<h4>Listado de asociados pep</h4>
<div class="container">
    <div class="card shadow table-responsive">
        <div class="card-body table-responsive">
            
            <!-- Tabla -->
            <table class="table table-bordered table-hover">
                <thead class="table-secondary">
                    <tr>
                        <th scope="col">Identificacion</th>
                        <th scope="col">Nombre y apellidos</th>
                        <th scope="col" style="text-align: center;">Ver nucleo familiar</th>
                        <th scope="col" style="text-align: center;">Editar</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Iterar sobre la lista de asociados PEP -->
                    {% for asociado in object_list %}
                        <tr>
                            <td>{{ asociado.identificacion }}</td>
                            <td>{{ asociado.nombre }}</td>
                            <td style="text-align: center;">
                                <!-- Enlace para ver el núcleo familiar del asociado -->
                                <a href="{% url 'persona_detalle' asociado.id %}" class="btn btn-success fa-regular fa-eye"></a>
                            </td>
                            <td style="text-align: center;">
                                <!-- Enlace para ver el núcleo familiar del asociado -->
                                <a href="{% url 'crear_familiares' persona_pep_id=asociado.id %}?messageListado=Actualizar" class="btn btn-info fa-solid fa-pen-to-square"></a>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>

            {% include 'usuarios/snippets/paginator.html' %} <!-- Configuración de paginación -->
        </div>
    </div>
</div> <!-- div final-->

{% else %}  <!-- aqui pongo el final del condicional para saber si el que accede es un administrador-->

{% include 'accesoRestringido.html' %}    <!--  Dentro de este archivo configuro el mensaje a mostar -->

{% endif %}  <!-- aqui pongo el final del condicional para saber si el que accede es un administrador-->

{% endblock %}